# CHANGELOG

## v1.3.2 (next)

Enhancements:

* Add configuration to show or hide timestamp in log output.

  Log output in system that use systemd is too long. This option, default to
  0, will shortened the log output.

## v1.3.1 (2016-10-29)

Fixes:

- Fix duplicate record caused by regression on tree (commit 6da7ea8)
- ResQueue: remove static NEW method

  Using free on NEW method and delete on REMOVE method will trigger invalid
  delete operation when debugging with valgrind.


## v1.3.0 (2016-10-19)

Breaking changes:

For user that use non standard port for rescached, the configuration value
for `server.listen.port` has been merge with `server.listen`. From now on, to
set port for listening, user must add it after the listen address, e.g.
`127.0.0.1:53`.

Fixes:

* Print TTL value when adding new answer type. This will align the `add`
  output with others when debug option is set.
* libvos: Fix SOA record parsing
* Remove duplicate extraction on the answer data
* Fix installation on old linux system with old version of `asciidoc`
* Fix systemd service file installation directory

Enhancements:

* Include generated man page in repository. Since different system can have
  old asciidoc program, building it can be problematic and error.

* Two more hosts sources for ads/malware sites were added,

  * Dan Pollock for 'http://someonewhocares.org/hosts/hosts'
  * Winhelp2002 for 'http://winhelp2002.mvps.org/hosts.txt'

* Blocked hosts now use the IP 127.0.0.2, not 127.0.0.1.

* Install script to update list of ads/malware hosts file.

  User now can run this script manually, to update their hosts file without
  waiting update from rescached package. The script is located in:
  `/usr/bin/rescached-update-hosts-block.sh`.

* Update list of blocked host

* Strip generated binary. The binary size is now around 55k, previously its
  around 70k.

* Support for ARM has been tested on Raspberry PI

* Include AUR script package as submodule

* Remove backup function.

  Since cache file is not crucial, hence `cache`, there is no need to create
  a backup everytime the process stopped or restarted.

* Differentiate DNS packet by name and type

  DNS packet with hostname `x.com` and type `A` will be different with DNS
  packet with hostname `x.com` and type `AAAA`.


## v1.2.0 (2016-09-04)

Remove additional or auth section if packet size greater than 512 bytes.

Some DNS library or resolver can not handle packet size greater than
512 bytes automatically. This is because RFC 1035 defined that DNS packet must
not exceed 512 bytes or server must set the TrunCated flag if greater than
that.


## v1.1.0 (2016-07-07)

* Replace cache mode config with cache minimum TTL config.

  Nowaday DNS record last only 60 second. Saving it permanently will
  cause wrong connection from client (probably 404 or host not found), while
  saving it temporarily will cause many cache misses (renewed).

  Our solution to this problem is by allowing user to replace TTL value
  in DNS record with some value only if below this config.

* Fix compiler name on GCC 6

  On GCC 6, `gcc` can not be used anymore to compile C++, we should use `g++`.

* Update host ads


## v1.0.0 (2016-02-12)

* Enable to handle request from UDP and TCP connections
* Saving/loading cache to/from disk
* Load and serve addresses and hostnames in `/etc/hosts`
* Blocking ads using hosts file format
* Supported DNS record type:
  * A: a host address
  * NS: an authoritative name server
  * CNAME: a canonical name for an alias
  * SOA: zone authority
  * PTR: a domain name pointer
  * HINFO: host information
  * MX: mail exchange
  * TXT: text string
  * SRV: location of services
  * AAAA: a host address for IPv6
